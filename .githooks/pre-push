#!/bin/sh
# Local pre-push hook: run lint + tests to mirror CI
echo "Running local CI: lint + tests"

python -m ruff check src
rc=$?
if [ $rc -ne 0 ]; then
  echo "Lint failed (ruff). Aborting push."
  exit $rc
fi

export PYTHONPATH=src
python -m pytest -q
rc=$?
if [ $rc -ne 0 ]; then
  echo "Tests failed. Aborting push."
  exit $rc
fi

echo "Local CI passed. Proceeding with push."
exit 0
